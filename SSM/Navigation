Step 1. Create The Security Group With Limited Rules

Login AWS Console -> Search Bar -> Security groups(EC2 feature) -> Create security group -> Security group name -> Name -> Description -> Inbound rules -> Add rule -> Type(HTTP) -> Source(Anywhere-IPv4) -> Create security group



Step 2. Create The Role For SSM

Search Bar -> IAM -> Go To Roles Section -> Create role -> Use case -> Service or use case(EC2) -> Next -> Permissions policies(Select The AmazonSSMManagedInstanceCore) -> Next -> Role name -> Name -> Create role



Step 3. Run The Script

Launch The EC2 instance by using the instance-setup-script



Step 4. Connect The EC2 Instance By SSM

Search Bar -> SSM -> Systems Manager -> Session Manager -> Start Session -> Select The Target instances -> Start session



Step 5. Check The Status Of SSM Agent And Apache2

systemctl status snap.amazon-ssm-agent.amazon-ssm-agent.service
systemctl status apache2
